version: '3'
services:
  devcontainer:
    image: ghcr.io/lucernae/devcontainer-nix:flake---latest
    build:
      context: .
      dockerfile: Dockerfile-flake
      args:
        NIXOS_VERSION: "nixos-${NIXOS_VERSION_STRING}"
        NIX_CONFIG: "${BOOTSTRAP_NIX_CONFIG}"
        MAIN_NIX_CHANNEL: "https://nixos.org/channels/nixos-${NIXOS_VERSION_STRING}"
        HOME_MANAGER_CHANNEL: "https://github.com/nix-community/home-manager/archive/release-${NIXOS_VERSION_STRING}.tar.gz"